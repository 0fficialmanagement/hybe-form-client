(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function s(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=s(o);fetch(o.href,i)}})();class G{constructor(){this.activeModals=new Map,this.activeTimers=new Map}initialize(t){const s=document.getElementById(t);if(!s)return console.error(`Modal ${t} not found`),null;try{const r=new bootstrap.Modal(s);return this.activeModals.set(t,r),s.addEventListener("hidden.bs.modal",()=>{this.cleanup(t)},{once:!0}),r}catch(r){return console.error(`Failed to initialize modal "${t}": ${r.message}`),null}}show(t,s={}){const r=this.activeModals.get(t)||this.initialize(t);r&&(s.countdown&&this.setupCountdown(t,s.countdown),r.show())}hide(t){const s=this.activeModals.get(t);s&&s.hide()}setupCountdown(t,{duration:s,elementId:r,onComplete:o}){const i=document.getElementById(r);if(!i){console.error(`Countdown element "${r}" not found`);return}let l=s;i.textContent=l;const I=setInterval(()=>{if(l--,i.textContent=l,l<=0&&(this.cleanup(t),this.hide(t),typeof o=="function"))try{o()}catch(m){console.error(`Error in onComplete callback: ${m.message}`)}},1e3);this.activeTimers.set(t,I)}cleanup(t){const s=this.activeTimers.get(t);s&&(clearInterval(s),this.activeTimers.delete(t))}}const h=new G;document.addEventListener("DOMContentLoaded",()=>{typeof AOS<"u"&&AOS.init({duration:800,once:!0});const u=document.getElementById("subscription-form"),t=document.getElementById("form-message"),s=document.getElementById("referral-code"),r=document.getElementById("full-name"),o=document.getElementById("email"),i=document.getElementById("phone"),l=document.getElementById("dob"),I=document.getElementById("gender"),m=document.getElementById("branch"),f=document.getElementById("group"),E=document.getElementById("artist"),p=document.getElementById("payment-type"),b=document.getElementById("installment-options");document.getElementById("payment-methods");const C=document.getElementById("privacy-policy"),U=document.getElementById("subscription-agreement"),g=document.getElementById("submit-btn"),v=g.querySelector(".btn-text"),N=g.querySelector(".spinner-border"),L=document.querySelector(".progress-bar"),w=document.getElementById("country-select");document.getElementById("country"),document.getElementById("currency"),document.getElementById("language");const Y=document.getElementById("permit-id"),A=document.getElementById("submission-id"),M=document.getElementById("digital-currency-home-btn");h.show("onboardingModal");const H=[{name:"BigHit Music",groups:["BTS","TXT"]},{name:"PLEDIS Entertainment",groups:["SEVENTEEN","fromis_9"]},{name:"BELIFT LAB",groups:["ENHYPEN","ILLIT"]},{name:"KOZ Entertainment",groups:["ZICO"]},{name:"ADOR",groups:["NewJeans"]},{name:"HYBE Labels Japan",groups:["&TEAM"]}];H.forEach(n=>{const e=document.createElement("option");e.value=n.name,e.textContent=n.name,m.appendChild(e)}),m.addEventListener("change",()=>{const n=H.find(e=>e.name===m.value);f.innerHTML='<option value="" disabled selected>Select a Group</option>',E.innerHTML='<option value="" disabled selected>Select an Artist</option>',n&&n.groups.forEach(e=>{const a=document.createElement("option");a.value=e,a.textContent=e,f.appendChild(a)}),y()}),f.addEventListener("change",()=>{E.innerHTML='<option value="" disabled selected>Select an Artist</option>';const n=f.value,e={BTS:["RM","Jin","SUGA","j-hope","Jimin","V","Jung Kook"],TXT:["SOOBIN","YEONJUN","BEOMGYU","TAEHYUN","HUENINGKAI"],SEVENTEEN:["S.COUPS","JEONGHAN","JOSHUA","JUN","HOSHI","WONWOO","WOOZI","THE 8","MINGYU","DK","SEUNGKWAN","VERNON","DINO"],fromis_9:["LEE SAEROM","SONG HAYOUNG","PARK JIWON","ROH JISUN","LEE SEOYEON","LEE CHAEYOUNG","LEE NAGYUNG","BAEK JIHEON"],ENHYPEN:["JUNGWON","HEESEUNG","JAY","JAKE","SUNGHOON","SUNOO","NI-KI"],ILLIT:["YUNAH","MINJU","MOKA","WONHEE","IROHA"],ZICO:["ZICO"],NewJeans:["MINJI","HANNI","DANIELLE","HAERIN","HYEIN"],"&TEAM":["K","FUMA","NICHOLAS","EJ","YUMA","JO","HARUA","TAKI","MAKI"]};e[n]&&e[n].forEach(a=>{const O=document.createElement("option");O.value=a,O.textContent=a,E.appendChild(O)}),y()});function y(){let e=0;s.value&&e++,r.value&&e++,o.value&&e++,i.value&&e++,document.getElementById("address-line1").value&&e++,document.getElementById("city").value&&e++,document.getElementById("state").value&&e++,document.getElementById("postal-code").value&&e++,w.value&&e++,l.value&&e++,I.value&&e++,m.value&&e++,f.value&&e++,E.value&&e++,p.value&&e++,document.querySelector('input[name="contact-method"]:checked')&&e++;const a=e/14*100;L.style.width=`${a}%`,L.setAttribute("aria-valuenow",a)}p&&b&&p.addEventListener("change",()=>{p.value==="Installment"?(b.classList.remove("d-none"),document.getElementById("installment-plan").required=!0):(b.classList.add("d-none"),document.getElementById("installment-plan").required=!1),document.querySelectorAll('input[name="payment-method"]').forEach(n=>{n.required=!0}),y()}),M&&M.addEventListener("click",()=>{h.hide("digitalCurrencySuccessModal"),window.location.href="https://hybecorp.com"});function P(){const n=Date.now(),e=Math.floor(Math.random()*1e4);return`HYBE-FP-${n}-${e}`}function d(n,e="info"){t&&(t.className=`mt-3 text-center alert alert-${e} alert-dismissible fade show`,t.textContent=n,t.classList.remove("d-none"),setTimeout(()=>{t.classList.add("d-none")},7e3))}function c(){g&&N&&v&&(g.disabled=!1,N.classList.add("d-none"),v.classList.remove("d-none"))}[s,r,o,i,document.getElementById("address-line1"),document.getElementById("address-line2"),document.getElementById("city"),document.getElementById("state"),document.getElementById("postal-code"),w,l,I,m,f,E,p].forEach(n=>{n&&n.addEventListener("input",y)}),document.querySelectorAll('input[name="contact-method"]').forEach(n=>{n.addEventListener("change",y)}),document.querySelectorAll('[data-bs-toggle="tooltip"]').forEach(n=>{new bootstrap.Tooltip(n)});let B;window.intlTelInput&&i&&(B=window.intlTelInput(i,{separateDialCode:!0,initialCountry:"auto",geoIpLookup:function(n,e){fetch("https://ipapi.co/json").then(a=>a.json()).then(a=>n(a.country_code)).catch(()=>n("US"))},utilsScript:"https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/18.1.1/js/utils.js"}));const J=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;u&&u.addEventListener("submit",async n=>{n.preventDefault(),g&&N&&v&&(g.disabled=!0,N.classList.remove("d-none"),v.classList.add("d-none")),t&&t.classList.add("d-none");try{if(!u.checkValidity()){u.classList.add("was-validated"),d("Please fill out all required fields correctly.","danger"),c();return}if(s.value!=="HYBE2025"){d("Invalid referral code. Use HYBE2025.","danger"),c();return}if(!J.test(o.value)){d("Invalid email address.","danger"),c();return}if(!B||!B.isValidNumber()){d("Invalid phone number.","danger"),c();return}i.value=B.getNumber();const e=new Date(l.value);if(isNaN(e)||l.value!==e.toISOString().split("T")[0]){d("Invalid date of birth. Use YYYY-MM-DD format.","danger"),c();return}if(new Date().getFullYear()-e.getFullYear()<13){d("You must be at least 13 years old to subscribe.","danger"),c();return}if(!C.checked){d("You must agree to the Privacy Policy.","danger"),c();return}if(!U.checked){d("You must agree to complete the subscription.","danger"),c();return}Y.value=P(),A.value=`SUB-${Date.now()}`,h.show("validationModal",{countdown:{duration:5,elementId:"countdown",onComplete:()=>{const S=u.querySelector('input[name="payment-method"]:checked');if(!S){d("Please select a payment method.","danger"),c();return}S.value==="Card Payment"?h.show("paymentModal",{countdown:{duration:5,elementId:"payment-countdown",onComplete:()=>{const T=p.value;T==="Full Payment"?window.location.href="https://buy.stripe.com/14AfZh1LD4eL9Kx0972ZO04":T==="Installment"&&(window.location.href="https://buy.stripe.com/3cIfZhgGxdPlaOBaNL2ZO06")}}}):S.value==="Digital Currency"?(h.show("digitalCurrencySuccessModal"),c()):(d("Selected payment method is not supported.","danger"),c()),console.log(`Subscription submitted: ${A.value}, Artist: ${E.value}, Payment: ${p.value}`)}}})}catch(e){d(`Submission failed: ${e.message}`,"danger"),c()}})});
